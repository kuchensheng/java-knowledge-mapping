# Java并发编程基础
## 线程简介
现代操作系统调度的最小单元是线程，也叫轻量级进程
## 为什么使用多线程
+ 更多的处理器核心
+ 更快的响应时间
+ 更好的编程模型

## 线程状态
Java 线程在运行的声明周期中可能处于6种不同的状态，在给定的时刻，线程只能处于其中一个状态。

|状态名称| 说明|
| ----- | ----- |
| NEW | 初始状态，线程被构建，但是还没有调用start()方法 |
| RUNABLE|运行状态，Java线程将操作系统中的就绪和运行两种状态统称为“运行中”|
| BLOCKED|阻塞状态，表示线程阻塞于锁|
| WATING|等待状态，表示“当前线程需要等待其他线程做出一些特定动作” |
| TIME_WAITING|超时等待，可以在指定的时间自行返回|
| TERMINATED|终止状态，表示当前线程已经执行完毕|

可以使用jstack命令尝试查看线程信息。

## Daemon线程
守护线程。通过调用Thread.setDaemon(true)将线程设置为Daemon线程

## 启动和终止线程
线程随着start()方法启动，run()方法执行完毕后终止。

过期的suspend()、resume()和stop。

过期原因：在调用后，线程不会释放已经占有的资源，比如锁，而是占着资源进入睡眠状态，这样容易引发死锁问题。

**安全地终止线程**
中断操作最适合用来取消或停止任务。除了中断意外，还可以利用一个Boolean变量来控制是否需要停止任务并终止该线程。使用**cancle()**可以终止线程。

## Thread.join()的使用
如果一个线程A执行了thread.join()语句，其含义是：当前线程A等待thread线程终止之后才从thread.join()返回.

## ThreadLocal的使用
ThreadLocal，即线程变量，是一个以ThreadLocal对象为键、任意对象为值的存储结构。这个结构被附在线程上，也就是说一个线程可以根据一个ThreadLocal对象查询到绑定在这个线程上的一个值。